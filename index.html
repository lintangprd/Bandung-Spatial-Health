<!DOCTYPE html>
<html>
    <head>
        <title>Peta Geospatial Mashup Kesehatan Kota Bandung</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
        <script src="kelGeoJSON.geojson"></script>
        <style>#map {width:800px; height:600px}
        .info { padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; 
        background: white; background: rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(0,0,0,0.2); 
        border-radius: 5px; }
        </style>
    </head>
    <body>
        <div id = "map"></div>
        <script>
            var mymap = L.map('map').setView([-6.909797228420133, 107.64109540302753], 12);
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
                    'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>' + ', BPS Kota Bandung, and OpenData Kota Bandung',
                id: 'mapbox/streets-v11',
                tileSize: 512,
                zoomOffset: -1
            }).addTo(mymap);

            
            function style(feature) {
                return {
                    fillColor: 'green',
                    weight: 2,
                    opacity: 1,
                    color: 'white',
                    dashArray: '3',
                    fillOpacity: 0.7
                };
            }

            
            function highlightFeature(e) {
                var layer = e.target;

                layer.setStyle({
                    weight: 5,
                    color: '#666',
                    dashArray: '',
                    fillOpacity: 0.7
                });

                if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                    layer.bringToFront();
                }
                info.update(layer.feature.properties);
            }

            function resetHighlight(e) {
                kecamatan.resetStyle(e.target);
                info.update();
            }

           
            function onEachFeature(feature, layer) {
                layer.bindPopup('KECAMATAN: <br>' + feature.properties.KECAMATAN
                );
                layer.on({
                    mouseover: highlightFeature,
                    mouseout: resetHighlight
                });
            }

            

            var kecamatan = L.geoJSON(kelGeoJSON, {style: style, onEachFeature: onEachFeature
            }).addTo(mymap);
            

            var info = L.control({position: 'topright'});
            info.onAdd = function (mymap) {
                this._div = L.DomUtil.create('div', 'info');
                this.update();
                return this._div;
            };
            info.update = function (props) {
                this._div.innerHTML = '<h4>Informasi Kesehatan Masyarakat</h4>' +  (props ?
                    'Kecamatan: ' + props.KECAMATAN + 
                    '<br> Jumlah Rumah Sakit: ' + props.RS + 
                    '<br> Jumlah Puskesmas: ' + props.PUSKESMAS + 
                    '<br> Jumlah Rumah tidak Sesuai Syarat Sehat: ' + props.SYARATSEHAT + 
                    '<br> Jumlah Rumah tidak Sesuai PHBS: ' + props.PHBS + 
                    '<br> Jumlah Obesitas: ' + props.JUMLAHOBESITAS
                    : 'Pilih Kecamatan');
            };

            info.addTo(mymap);

        </script>
    </body>


</html>
